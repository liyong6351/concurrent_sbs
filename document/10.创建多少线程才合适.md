# 概览

在Java中使用多线程，那么线程数目应该怎么去确定呢?

## 1 为什么要使用多线程

* 度量性能的指标有很多，但是两个是最核心的，延迟和吞吐量。
* 使用多线程的目的是减低延迟、提高吞吐量

## 2 多线程的应用场景有哪些

要降低延迟，提高吞吐量，有两个方向可以突破:

* 优化算法
* 将硬件性能发挥到极致

前者是属于算法优化的范畴，而并发则和第二条息息相关，那么计算机有哪些硬件呢?主要是两个:

* 提升I/O利用率
* 提高CPU利用率

多线程就是为了综合解决上述问题而生的~

## 3 创建多少线程合适

* 如果线程操作I/O相关的操作比较多，那么我们称为I/O密集型计算
* 如果线程操作CPU相关的操作比较多，那么我们称为CPU密集型计算

* 对于CPU密集型的计算场景，理论上"线程数量=CPU核数"，但是一般设置线程数量=CPU核数+1
* 对于I/O密集型的计算场景，理论上”线程数量= 1 + (IO耗时/CPU耗时)“，对于多CPU，计算公式如下: 线程数量 = CPU核数*(1+(I/O耗时)/CPU耗时)

